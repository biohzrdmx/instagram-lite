/*!

Name: Instagram Lite
Dependencies: jQuery
Author: Michael Lynch
Author URL: http://michaelynch.com
Date Created: January 14, 2014
Licensed under the MIT license

*/
!function(t){t.fn.instagramLite=function(e){if(!this.length)return this;plugin=this,plugin.defaults={username:null,hashtag:null,clientID:null,limit:null,list:!0,videos:!1,urls:!1,captions:!1,date:!1,likes:!1,comments_count:!1,max_id:null,load_more:null,error:function(){},success:function(){}};var a=t.extend({},plugin.defaults,e),i=t(this),s=function(t){return t[t.length-1].id},l=function(t){for(var e=t.split(" "),a="",i=0;i<e.length;i++){var s;if("@"==e[i][0]){var l='<a href="http://twitter.com/'+e[i].replace("@","").toLowerCase()+'" target="_blank">'+e[i]+"</a>";s=l}else if("#"==e[i][0]){var l='<a href="http://twitter.com/hashtag/'+e[i].replace("#","").toLowerCase()+'" target="_blank">'+e[i]+"</a>";s=l}else s=e[i];a+=s+" "}return a},n=function(){if(a.clientID&&(a.username||a.hashtag)){var e=function(e){if(a.username&&!a.hashtag)var n="https://api.instagram.com/v1/users/"+e.id+"/media/recent/?client_id="+a.clientID+"&count="+a.limit+"&callback=?";else if(a.hashtag)var n="https://api.instagram.com/v1/tags/"+a.hashtag+"/media/recent/?client_id="+a.clientID+"&count="+a.limit+"&callback=?";n+=a.max_id?"&max_id="+a.max_id:"",t.ajax({type:"GET",url:n,dataType:"jsonp",success:function(t){if(200===t.meta.code&&t.data.length){for(var e=0;e<t.data.length;e++){var n,o=t.data[e];if("image"===o.type||!a.videos){if(n='<img class="il-photo__img" src="'+o.images.standard_resolution.url+'" alt="Instagram Image" data-filter="'+o.filter+'" />',a.urls&&(n='<a href="'+o.link+'" target="_blank">'+n+"</a>"),(a.captions||a.date||a.likes||a.comments_count)&&(n+='<div class="il-photo__meta">'),a.captions&&o.caption&&(n+='<div class="il-photo__caption" data-caption-id="'+o.caption.id+'">'+l(o.caption.text)+"</div>"),a.date){var r=new Date(1e3*o.created_time),c=r.getDate(),d=r.getMonth()+1,u=r.getFullYear();r.getHours(),r.getMinutes(),r.getSeconds();r=d+"/"+c+"/"+u,n+='<div class="il-photo__date">'+r+"</div>"}a.likes&&(n+='<div class="il-photo__likes">'+o.likes.count+"</div>"),a.comments_count&&o.comments&&(n+='<div class="il-photo__comments">'+o.comments.count+"</div>"),(a.captions||a.date||a.likes||a.comments_count)&&(n+="</div>")}if("video"===o.type&&a.videos&&o.videos){var m;o.videos.standard_resolution?m=o.videos.standard_resolution.url:o.videos.low_resolution?m=o.videos.low_resolution.url:o.videos.low_bandwidth&&(m=o.videos.low_bandwidth.url),n='<video poster="'+o.images.standard_resolution.url+'" controls>',n+='<source src="'+m+'" type="video/mp4;"></source>',n+="</video>"}a.list&&n&&(n='<li class="il-item" data-instagram-id="'+o.id+'">'+n+"</li>"),""!==n&&i.append(n)}a.max_id=s(t.data),a.success.call(this)}else a.error.call(this,t.meta.code,t.meta.error_message)},error:function(){a.error.call(this)}})};i.each(function(){t(this);a.username&&!a.hashtag?t.ajax({type:"GET",url:"https://api.instagram.com/v1/users/search?q="+a.username+"&client_id="+a.clientID+"&callback=?",dataType:"jsonp",success:function(t){if(t.data.length){var i=t.data[0];e(i)}else a.error.call(this)},error:function(){a.error.call(this)}}):a.hashtag&&e(null)})}else a.error.call(this)};a.load_more&&t(a.load_more).on("click",function(t){t.preventDefault(),n()}),n()}}(jQuery);